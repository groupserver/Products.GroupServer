<rdf:RDF xmlns="http://purl.org/rss/1.0/"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:tal="http://xml.zope.org/namespaces/tal" 
         tal:define="ztu python:modules['ZTUtils'];
                     mq python:ztu.make_query;
                     uq python:ztu.url_query;
                     xcu python:modules['Products.XWFCore.XWFUtils'];
                     cr python:xcu.createRequestFromRequest;
                     ct python:xcu.convertTextToAscii;
                     group_object python:here.Scripts.get.group_object()">

    <channel tal:attributes="rdf:about python:'%s/messages' % (group_object.absolute_url())">
        <title tal:content="python:group_object.getProperty('title', '')"/>
        <description tal:content="python:'%s' % (group_object.getProperty('group_name', ''))"/>
        <link tal:content="python:'%s/messages' % (group_object.absolute_url())"/>

	<items>
   	    <rdf:Seq>
                <rdf:li tal:repeat="thread python:options['result_set']"
                        tal:attributes="rdf:resource python:'%s/%s' % (request.URL1, thread[1][0]['id'])"/>
            </rdf:Seq>
        </items>
    </channel>

    <item tal:repeat="thread python:options['result_set']"
          tal:attributes="rdf:about python:'%s/%s' % (request.URL1, thread[1][0]['id'])">
        <link tal:content="python:'%s/view_email?id=%s&amp;show_thread=1' % (request.URL1, thread[1][0]['id'])">message link</link>
        <dc:date tal:content="python:thread[1][0]['mailDate'].toZone(here.GlobalConfiguration.getProperty('timezone','GMT')).strftime('%Y-%m-%d')">2004-11-01</dc:date>
        <title tal:content="python:thread[1][0]['mailSubject']">mail subject</title>
	<description tal:define="body python:ct(thread[1][0].getObject().getProperty('mailBody'))"
                     tal:content="python:len(body) > 200 and '%s ...' % body[:200] or '%s' % body"/>
    </item>

</rdf:RDF>