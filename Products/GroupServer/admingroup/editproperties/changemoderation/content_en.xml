<?xml version="1.0" ?>
<root xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:xf="http://www.w3.org/2002/xforms">
  <data tal:content="structure python:here.models(method='xml')"/>
  <output>
    <content
      tal:define="group_object here/Scripts/get/group_object; 
        group_members context/Scripts/get/group_members;
        member_count context/Scripts/get/group_member_count;
        groupType python:group_object.getProperty('group_template');
        isGroupDiscussion python:groupType == 'standard';
        moderated python:here.Scripts.get.list_property(group_object.getId(), 'moderated', False)"
      tal:condition="python:isGroupDiscussion">
      
      <heading1>Change the Moderation of
        <span class="group"
          tal:content="group_object/title_or_id"/>
      </heading1>

      <paragraph>This page is used to toggle moderation for
        <span class="group"
          tal:content="group_object/title_or_id"/>.
        <span tal:condition="python:member_count &lt;= 127">
		  See the 
		  <link url="#"
		  	tal:attributes="url string:/groups/${group_object/getId}/managemembers.html">Manage Members</link>
		  page to specify the members of 
		  <span class="group"
		    tal:content="group_object/title_or_id"/> that
		  are moderated, and who the moderator is.</span>
      </paragraph>

      <fieldset>
        <xf:select1 appearance="full" model="moderate_group"
          ref="moderation_level">
          <xf:item>
            <xf:label>No moderation.</xf:label>
            <xf:value>none</xf:value>
          </xf:item>
          <xf:item>
            <xf:label>Moderate specified members only.</xf:label>
            <xf:value>specified_only</xf:value>
          </xf:item>
          <xf:item>
            <xf:label>Moderate specified members, and all new members
              that join
              <span tal:replace="group_object/title_or_id"/>.</xf:label>
            <xf:value>specified_and_new</xf:value>
          </xf:item>
        </xf:select1>
        
        <xf:submit model="moderate_group" submission="change"
          class="button" >
          <xf:label>Change</xf:label>
          <xf:hint>Change the moderation for this group</xf:hint>
        </xf:submit>
      </fieldset>
    </content>
  </output>
</root>
