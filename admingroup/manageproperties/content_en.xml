<?xml version="1.0" ?>
<root xmlns:tal="http://xml.zope.org/namespaces/tal" 
	xmlns:metal="http://xml.zope.org/namespaces/metal" 
	xmlns:xf="http://www.w3.org/2002/xforms">
  <data tal:content="structure python:here.models(method='xml')"/>
  <output>
    <content 
			tal:define="group_members here/Scripts/get/group_members">
			
			<heading1>Group Properties</heading1>
			
      <fieldset id="generalproperties">
        <legend>General Properties</legend>
        <xf:input model="group_properties" ref="grouptitle" class="text">
          <xf:label>Title</xf:label>
          <xf:hint>Please enter the title of the group</xf:hint>
        </xf:input>
        <xf:input model="group_properties" ref="groupSubject"
          class="text">
          <xf:label>Subject</xf:label>
          <xf:hint>Please enter the start of the subject-line for
            email messages sent from the group</xf:hint>
        </xf:input>

        <tal:block tal:repeat="prop here/GroupProperties/objectValues"
          tal:replace="structure python:here.generate_tag(prop.getProperty('property_type'),
          {'model': 'group_properties',
          'ref': prop.getId(),
          'label': prop.title_or_id(),
          'hint': prop.getProperty('description','')})" />
      </fieldset><!--generalproperties-->
      
      <fieldset id="postinglimits"
        tal:condition="python:context.Scripts.get.option('admin_can_set_posting_limit', True)">
        <legend>Posting Limits</legend>
        <!-- -=mpj17=- Ouch! I need to really work on the wording here. -->
        <paragraph>The number of posts can a group member make in a
          particular interval.</paragraph>
        <xf:input model="group_properties" ref="senderlimit"
          class="text">
          <xf:label>Post limit</xf:label>
          <xf:hint>The maximum number of posts a user can send in the 
            posting interval.</xf:hint>
        </xf:input>
        <xf:input model="group_properties" ref="senderinterval"
          class="text">
          <xf:label>Posting Interval</xf:label>
          <xf:hint>The number of hours that the post limit applies 
            to.</xf:hint>
        </xf:input>
      </fieldset><!--postinglimits-->
      
      <fieldset id="security">
        <legend>Group Security</legend>
        <xf:select1 appearance="minimal" model="group_properties"
          ref="permvisibility" class="text">
          <xf:label>Visibility</xf:label>
          <xf:hint>Who can see this group</xf:hint>
          <xf:item>
            <xf:label>Everyone</xf:label>
            <xf:value>anyone</xf:value>
          </xf:item>
          <xf:item>
            <xf:label>Only division and group members</xf:label>
            <xf:value>division</xf:value>
          </xf:item>
          <xf:item>
            <xf:label>Only group members</xf:label>
            <xf:value>group</xf:value>
          </xf:item>
        </xf:select1>
        
        <xf:select1 appearance="minimal" model="group_properties"
          ref="permjoin" class="text">
          <xf:label>Joinability</xf:label>
          <xf:hint>Who can join this group</xf:hint>
          <xf:item>
            <xf:label>Anyone, without approval</xf:label>
            <xf:value>anyone</xf:value>
          </xf:item>
          <xf:item>
            <xf:label>Anyone, pending approval</xf:label>
            <xf:value>apply</xf:value>
          </xf:item>
          <xf:item>
            <xf:label>Only those invited</xf:label>
            <xf:value>invite</xf:value>
          </xf:item>
        </xf:select1>
        
        <xf:select1 appearance="minimal" model="group_properties"
          ref="permviewfiles" class="text">
          <xf:label>View files</xf:label>
          <xf:hint>Who can view the files in this group</xf:hint>
          <xf:item>
            <xf:label>Same as group settings</xf:label>
            <xf:value>default</xf:value>
          </xf:item>
          <xf:item>
            <xf:label>Everyone</xf:label>
            <xf:value>anyone</xf:value>
          </xf:item>
          <xf:item>
            <xf:label>Only division and group members</xf:label>
            <xf:value>division</xf:value>
          </xf:item>
          <xf:item>
            <xf:label>Only group members</xf:label>
            <xf:value>group</xf:value>
          </xf:item>
        </xf:select1>
        
        <xf:select1 appearance="minimal" model="group_properties"
          ref="permviewmessages" class="text">
          <xf:label>View messages</xf:label>
          <xf:hint>Who can view the messages in this group</xf:hint>
          <xf:item>
            <xf:label>Same as group settings</xf:label>
            <xf:value>default</xf:value>
          </xf:item>
          <xf:item>
            <xf:label>Everyone</xf:label>
            <xf:value>anyone</xf:value>
          </xf:item>
          <xf:item>
            <xf:label>Only division and group members</xf:label>
            <xf:value>division</xf:value>
          </xf:item>
          <xf:item>
            <xf:label>Only group members</xf:label>
            <xf:value>group</xf:value>
          </xf:item>
        </xf:select1>
      </fieldset><!-- security -->
      <xf:submit model="group_properties" submission="change"
        class="button">
        <xf:label>Change Properties</xf:label>
        <xf:hint>Change the properties of the group</xf:hint>
      </xf:submit>
    </content>
  </output>
</root>
