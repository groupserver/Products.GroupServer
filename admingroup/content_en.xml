<?xml version="1.0" encoding="utf-8"?>
<html xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns="http://www.w3.org/2002/06/xhtml2/">
  <head>
    <title>OnlineGroups.Net Group Administration</title>
    <meta property="dc:created">August 2007</meta>
    <meta property="dc:publisher">OnlineGroups.Net</meta>
    <meta property="dc:rightsHolder">OnlineGroups.Net</meta>
    <meta property="dc:creator">Alice Murphy</meta>
    <meta property="dc:licence"/>
    <link rel="stylesheet" type="text/css" 
      href="/Presentation/Tofu/Common/css/xhtml2-globalstyle.css"/>
  </head>
  <body id="group-admin">
    <section id="group-admin">
      <h>Group Administration</h>
      <p>
        As a group administrator, you can perform the following tasks:
      </p>

      <ul
        tal:define="site context/Scripts/get/division_object;
          group context/Scripts/get/group_object;
          permission python:context.Scripts.check.permission(site, group, ('DivisionAdmin', 'GroupAdmin', 'Manager'));
          localUsersCanJoinGroup python:hasattr(context.LocalScripts, 'get') and getattr(context.LocalScripts.get, 'usersCanJoinGroup', None) or None;
          usersCanJoinGroup python:localUsersCanJoinGroup or modules['Products.XWFCore.XWFUtils'].users_can_join_group;
          joinable python:usersCanJoinGroup(group.getId(),True);
          canJoin python:joinable[0];
          member_count context/Scripts/get/group_member_count;
          groupType python:group.getProperty('group_template');
          isGroupDiscussion python:groupType == 'standard';
          isGroupAnnouncement python:groupType == 'announcement';
          isGroupModerated python:context.Scripts.get.list_property(group.getId(), 'moderated', False);">
        
        <li tal:condition="canJoin" href="addusers">
          <strong>Add members</strong> to
          <span class="group" tal:content="group/title_or_id"/>
        </li>
        <li tal:condition="python:not canJoin">
          Normally, you could add members to the group, but
          <span tal:content="python:joinable[1][1].lower()"/>
        </li>
        <li tal:condition="python:member_count &lt;= 127" href="managemembers">
          <strong>Manage the members</strong> of 
          <span class="group" tal:content="group/title_or_id"/>
        </li>
        <li tal:condition="python:member_count &gt; 127" href="manage_many_members">
          <strong>Manage the many members</strong> of 
          <span class="group" tal:content="group/title_or_id"/>
          <ul>
            <li tal:condition="isGroupModerated" href="managemembers/?show=moderated">
              Manage the moderated members
            </li>
            <li href="managemembers/?show=unverified">
              Manage the unverified members
            </li>
            <li tal:condition="isGroupAnnouncement" href="managemembers/?show=posting">
              Manage the posting members
            </li>
            <li href="managemembers/?show=managers">
              Manage the managers</li>
          </ul>
        </li>
        <li tal:condition="python:'DivisionAdmin' in user.getRolesInContext(group) and groupType != 'support'"
          href="editproperties">Edit group <strong>properties</strong>
          <ul>
            <li href="editproperties/generalproperties">
              Edit the <strong>general</strong> properties of 
                <span class="group" tal:content="group/title_or_id"/>
            </li>
            <li href="editproperties/securityproperties">
              Edit the <strong>security</strong> properties of 
                <span class="group" tal:content="group/title_or_id"/>
            </li>
            <li tal:condition="python:context.Scripts.get.option('admin_can_set_posting_limit', True)"
              href="editproperties/postinglimit">
              Edit the group <strong>posting limit</strong>
            </li>
            <li tal:condition="python:isGroupDiscussion" href="editproperties/changemoderation">
              Change group <strong>moderation</strong>
            </li>
          </ul>
        </li>
        <li tal:condition="python:('DivisionAdmin' in user.getRolesInContext(group)) and 
            (site.getProperty('isChargable', False)) and (groupType != 'support')"
          href="../groupshop">Alter the <strong>size</strong> of 
          <span class="group" tal:content="group/title_or_id"/>
          </li>
      </ul> 
    </section>
  </body>
</html>
